---
sidebar_position: 2
title: Quickstart
description: Run your first intent with IntentusNet in 5 minutes
---

# Quickstart

Get IntentusNet running in 5 minutes with this quickstart guide.

## Prerequisites

- Python 3.9+
- IntentusNet installed (`pip install intentusnet`)

## Step 1: Create a Simple Agent

Create `my_agent.py`:

```python
from intentusnet import (
    IntentusRuntime,
    BaseAgent,
    IntentEnvelope,
    AgentResponse,
    AgentDefinition,
    AgentIdentity,
    AgentEndpoint,
    AgentHealth,
    AgentRuntimeInfo,
    Capability,
    IntentRef,
)

# Define an agent that processes text
class TextProcessorAgent(BaseAgent):
    def handle_intent(self, env: IntentEnvelope) -> AgentResponse:
        text = env.payload.get("text", "")
        processed = {
            "original": text,
            "length": len(text),
            "words": len(text.split()),
            "uppercase": text.upper()
        }
        return AgentResponse.success(processed, agent=self.definition.name)

# Create agent definition
def create_text_processor_definition() -> AgentDefinition:
    return AgentDefinition(
        name="text-processor",
        version="1.0",
        identity=AgentIdentity(agentId="text-processor", tenantId="default"),
        capabilities=[
            Capability(
                intent=IntentRef(name="ProcessTextIntent", version="1.0"),
                inputSchema={"text": "string"},
                outputSchema={"length": "number", "words": "number"}
            )
        ],
        endpoint=AgentEndpoint(type="local", address=""),
        health=AgentHealth(status="healthy"),
        runtime=AgentRuntimeInfo(language="python", environment="local")
    )
```

## Step 2: Run the Intent

Add to `my_agent.py`:

```python
from intentusnet import (
    IntentContext,
    IntentMetadata,
    RoutingOptions,
    Priority,
)
from datetime import datetime

def main():
    # Create runtime with recording enabled
    runtime = IntentusRuntime(enable_recording=True)

    # Create and register agent
    definition = create_text_processor_definition()
    agent = TextProcessorAgent(definition, runtime.router)
    runtime.registry.register(definition)

    # Bind agent to router
    runtime.router._agents[definition.name] = agent

    # Create intent envelope
    envelope = IntentEnvelope(
        version="1.0",
        intent=IntentRef(name="ProcessTextIntent", version="1.0"),
        payload={"text": "Hello, IntentusNet! This is a test message."},
        context=IntentContext(
            sourceAgent="quickstart",
            timestamp=datetime.utcnow().isoformat(),
            priority=Priority.NORMAL,
            tags=["quickstart", "demo"]
        ),
        metadata=IntentMetadata(
            requestId="req-quickstart-001",
            source="quickstart-script",
            createdAt=datetime.utcnow().isoformat(),
            traceId="trace-quickstart-001",
            identityChain=[]
        ),
        routing=RoutingOptions()
    )

    # Execute intent
    print("Executing intent...")
    response = runtime.router.route_intent(envelope)

    # Print results
    print(f"\nStatus: {response.status}")
    print(f"Execution ID: {response.metadata.get('execution_id', 'N/A')}")
    print(f"Agent: {response.metadata.get('agent', 'N/A')}")
    print(f"\nPayload:")
    import json
    print(json.dumps(response.payload, indent=2))

if __name__ == "__main__":
    main()
```

## Step 3: Run It

```bash
python my_agent.py
```

Expected output:

```
Executing intent...

Status: success
Execution ID: exec-a1b2c3d4e5f6
Agent: text-processor

Payload:
{
  "original": "Hello, IntentusNet! This is a test message.",
  "length": 44,
  "words": 7,
  "uppercase": "HELLO, INTENTUSNET! THIS IS A TEST MESSAGE."
}
```

## Step 4: Inspect the Execution

Check the recorded execution:

```bash
ls -la .intentusnet/records/
```

View the execution record:

```bash
cat .intentusnet/records/exec-*.json | python -m json.tool
```

Output:

```json
{
  "header": {
    "executionId": "exec-a1b2c3d4e5f6",
    "createdUtcIso": "2024-01-15T10:30:00.123456Z",
    "envelopeHash": "sha256:e3b0c44298fc1c149afbf4c8996fb924...",
    "replayable": true,
    "replayableReason": null
  },
  "envelope": {...},
  "routerDecision": {
    "agent": "text-processor",
    "intent": "ProcessTextIntent",
    "reason": "deterministic_match"
  },
  "events": [
    {"seq": 1, "type": "INTENT_RECEIVED", ...},
    {"seq": 2, "type": "AGENT_ATTEMPT_START", ...},
    {"seq": 3, "type": "AGENT_ATTEMPT_END", ...},
    {"seq": 4, "type": "ROUTER_DECISION", ...},
    {"seq": 5, "type": "FINAL_RESPONSE", ...}
  ],
  "finalResponse": {...}
}
```

## Step 5: Replay the Execution

Replay returns the recorded output without re-execution:

```python
from intentusnet import FileExecutionStore, ReplayEngine

# Load the execution record
store = FileExecutionStore(".intentusnet/records")
records = list(store.list_all())
record = store.load(records[0])  # Load first record

# Create replay engine
engine = ReplayEngine(record)

# Check if replayable
is_ok, reason = engine.is_replayable()
print(f"Replayable: {is_ok}")

if is_ok:
    result = engine.replay()
    print(f"Replayed payload: {result.payload}")
```

## What Just Happened?

1. **Agent Registration**: You created and registered an agent with a capability
2. **Deterministic Routing**: The router matched your intent to the agent
3. **Execution Recording**: Every step was recorded with stable hashes
4. **Replay Capability**: The recorded execution can be replayed without re-running

## Key Concepts Demonstrated

| Concept | What You Saw |
|---------|--------------|
| IntentEnvelope | Structured request with metadata |
| AgentResponse | Standardized response format |
| Execution ID | Unique identifier for the execution |
| Recording | Automatic capture of execution |
| Replay | Return recorded output |

---

## MCP Gateway Quickstart

Already have an MCP server? Wrap it with the IntentusNet Gateway in 5 minutes — no server changes required.

### Step 1: Start an MCP Server

Use the included example server (or any existing MCP server):

```bash
python examples/basic-mcp-server/server.py
```

```
Basic MCP server running on http://localhost:5123
Tools available: add(a, b)
```

### Step 2: Start the Gateway

In a second terminal:

```bash
intentusnet gateway --http http://localhost:5123
```

The gateway wraps the server transparently. No protocol changes.

### Step 3: Send a Request Through the Gateway

```bash
curl -s http://localhost:8765 -X POST \
  -H "Content-Type: application/json" \
  -d '{
    "jsonrpc": "2.0",
    "id": 1,
    "method": "tools/call",
    "params": {
      "name": "add",
      "arguments": {"a": 17, "b": 25}
    }
  }' | python -m json.tool
```

Response (identical to calling the server directly):

```json
{
  "jsonrpc": "2.0",
  "id": 1,
  "result": {
    "content": [{"type": "text", "text": "17 + 25 = 42"}]
  }
}
```

### Step 4: See Recorded Executions

```bash
intentusnet executions
```

```
EXECUTION ID                             STATUS       METHOD          TOOL        DURATION
--------------------------------------------------------------------------------------------
a1b2c3d4-e5f6-7890-abcd-ef1234567890     completed    tools/call      add         12ms
```

### Step 5: Replay the Execution

```bash
intentusnet replay <execution-id>
```

Returns the stored response from WAL — no MCP server contacted, no tool re-executed.

### What You Should See

After completing all steps:

- **Gateway active** — Requests pass through transparently
- **Execution recorded** — Every tool call captured with hashes and timing
- **Replay works** — Stored response returned from WAL without re-execution
- **Deterministic seed captured** — Prepares for future deterministic replay

### How It Works

```
MCP Client (curl)  →  IntentusNet Gateway (8765)  →  MCP Server (5123)
                              ↓
                    WAL + Index + Data Store
```

The gateway intercepts tool calls, records them to an append-only WAL with hash chaining, captures deterministic seeds, and indexes executions for fast lookup and replay. The MCP server and client are completely unmodified.

---

## Next Steps

- [Walkthrough](./walkthrough) — Complete example with policy filtering and crash recovery
- [MCP Gateway](../mcp/gateway) — Deterministic MCP Gateway details
- [CLI Reference](../cli/overview) — Command-line tools for inspection and replay
- [Guarantees](../guarantees/overview) — Understand what IntentusNet guarantees
