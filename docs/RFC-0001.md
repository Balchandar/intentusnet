# RFC-0001 — IntentusNet Core: Envelope & Routing (Draft, Updated)
### Status: Draft
### Author: Balachandar Manikandan
### Last Updated: 2025-12-05
### Tags: Protocol, Envelope, Routing, Runtime, Agents

# 1. Summary

This RFC defines the core protocol for IntentusNet:
- The Intent Envelope — the canonical request object used to invoke agents.
- The Agent Response Envelope — uniform output shape for all agents.
- The Routing Model — how intents are matched with agents.
- Fallback & Retry Semantics.
- Execution & Trace Rules.

This RFC establishes a stable contract that all future SDKs (Python, C#, Go) and transports (HTTP, ZeroMQ, MCP) must follow.

# 2. Motivation

IntentusNet must support:
- Multi-language agents
- Multi-transport delivery
- Optional encryption (EMCL)
- Parallel and fallback routing
- Deterministic and debuggable orchestration
- Long-term compatibility with MCP or other ecosystems

A stable, language-agnostic envelope format is required so that:
- SDKs remain interoperable
- Transport implementations behave consistently
- Agents behave predictably
- Workflows can be orchestrated and traced across multiple agents

This RFC ensures contract stability for all future versions of IntentusNet.

# 3. Goals

- Define a strict but flexible request/response envelope.
- Make routing predictable and transparent.
- Support fallback, broadcast, and future parallel execution.
- Provide traceability for debugging, audits, and visualization.
- Ensure compatibility with EMCL and future MCP adapter.
- Provide forward-compatible versioning.

# 4. Non-Goals

- Full MCP adapter specification (separate RFC).
- Agent security/trust levels (future RFC).
- Planner/LLM-driven multi-agent workflows (future RFC).
- Distributed execution semantics (future RFC).

# 5. Intent Envelope Specification

## 5.1 JSON Structure

```jsonc
{
  "version": "1.0",
  "intent": {
    "name": "processDocument",
    "version": "1.0"
  },
  "payload": {},

  "context": {
    "sessionId": "uuid",
    "workflowId": "uuid",
    "memory": {},
    "history": []
  },

  "metadata": {
    "sourceAgent": "client",
    "timestamp": "2025-12-05T12:00:00Z",
    "priority": "NORMAL"
  },

  "routing": {
    "targetAgent": null,
    "fallbackAgents": [],
    "broadcast": false
  },

  "routingMetadata": {
    "previousAgents": [],
    "selectedAgent": null,
    "traceId": "uuid"
  }
}
```

## 5.2 Field Definitions

### version  
Specifies the envelope format version.  
Default: "1.0"

### intent  
Represents the semantic action to be executed.

### payload  
Opaque JSON object.

### context  
Execution metadata.

### metadata  
System metadata.

### routing  
Routing rules.

### routingMetadata  
Runtime-populated routing state.

# 6. Response Envelope

## 6.1 JSON Structure

```jsonc
{
  "version": "1.0",
  "status": "success",
  "payload": {},
  "error": null,
  "metadata": {
    "agent": "summarizer",
    "timestamp": "2025-12-05T12:00:01Z",
    "traceId": "uuid"
  }
}
```

# 7. Routing Semantics
Details about candidate discovery, fallback, and routing rules.

# 8. Execution Semantics
Rules for deterministic execution, immutability, trace spans.

# 9. Versioning Rules
Envelope versioning and deprecation rules.

# 10. Future Extensions
Trust levels, distributed routing, planners.

# 11. Security Considerations
EMCL wrapping, replay protection, size limits.

# 12. Revisions

| Version | Date | Change |
|--------|-------|---------|
| Draft-1 | 2025-12-05 | Initial complete rewrite |

# 13. Appendix A — Example Flow
Documented example end-to-end flow.
